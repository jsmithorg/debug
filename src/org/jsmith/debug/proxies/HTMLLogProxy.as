package org.jsmith.debug.proxies{	import flash.events.*;	import flash.external.ExternalInterface;		import org.jsmith.debug.*;		public class HTMLLogProxy extends EventDispatcher implements IEventDispatcher, ILogProxy	{		private var _isLogWindowCreated:Boolean;				public function HTMLLogProxy()		{			_isLogWindowCreated = false;					}//end constructor				public function log(category:String, type:LogType, message:*):void 		{			if(!_isLogWindowCreated)			{				createLogWindow();								_isLogWindowCreated = true;							}//end if						logToHTML("[ " + type + " ][ " + category + " ] " + message, type);						if((type == LogType.ERROR || type == LogType.FATAL) && message is Error)				logToHTML("[ Stack Trace ]\n" + (message as Error).getStackTrace(), type);					}//end method				private static function createLogWindow():void		{			//<div id="logWindow" style="margin:10px;height:480px;width:80%;overflow:scroll;border:1px solid #999999;"></div>						var jsFunction:XML = 							<javascript>        			<![CDATA[												function() 					    { 						  	var logWindow = document.createElement("div"); 							logWindow.setAttribute("id", "logWindow"); 							logWindow.setAttribute("style", "margin:10px; height:480px; width:80%; overflow:scroll; border:1px solid #999999;"); 						  	document.body.appendChild(logWindow); 					   	}											]]>    			</javascript>							ExternalInterface.call(jsFunction);					}//end method				private static function logToHTML(s:String, type:LogType):void 		{			//<div style="border-bottom:1px solid #ccc; padding:4px; font-family:Arial; font-size:10px; color:#000000;">log message</div>						var jsInfoFunction:XML = 							<javascript>        			<![CDATA[												function(s) 						{ 							var logWindow = document.getElementById("logWindow");												  		var logEntry = document.createElement("div"); 							logEntry.setAttribute("style", "border-bottom:1px solid #ccc; padding:4px; font-family:Arial; font-size:10px; color:#000000;");					  		logEntry.innerHTML = s; 					  		logWindow.appendChild(logEntry); 				   		}									 					]]>    			</javascript>								var jsErrorFunction:XML = 							<javascript>        			<![CDATA[												function(s) 						{ 							var logWindow = document.getElementById("logWindow");												  		var logEntry = document.createElement("div"); 							logEntry.setAttribute("style", "border-bottom:1px solid #ccc; padding:4px; font-family:Arial; font-size:10px; color:#FF0000;");					  		logEntry.innerHTML = s; 					  		logWindow.appendChild(logEntry); 				   		}									 					]]>    			</javascript>								var jsFunction:XML = (type == LogType.ERROR || type == LogType.FATAL) ? jsErrorFunction : jsInfoFunction;							try			{				ExternalInterface.call(jsFunction, s);			}			catch(e:SecurityError) {}					}//end method			}//end class	}//end package